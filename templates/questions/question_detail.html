{% extends "base.html" %} {% block content %}
<section>
  <h1 class="text-3xl font-bold">{{ question.title }}</h1>
  <p class="text-base-content/70 my-4">{{ question.body }}</p>

  <small class="text-base-content/50"
    ><time>{{ question.created_at }}</time></small
  >
  <p class="text-base-content/70">
    Asked by <b>{{ question.author.username }}</b>
  </p>
</section>

<div class="divider"></div>

<section class="mt-6">
  <div class="mt-5">
    <h2 class="text-2xl font-bold">Submit an Answer</h2>

    {% if user.is_authenticated %}
    <form
      method="POST"
      action="{% url 'answers:answer_question' question.id %}"
      class="mt-4"
    >
      {% csrf_token %} {{ answer_form.as_p }}
      <button type="submit" class="btn btn-primary">Submit Answer</button>
    </form>
    {% else %}
    <p>You must be logged in to submit an answer.</p>
    <a href="{% url 'login' %}">Login</a>
    {% endif %}
  </div>

  <div class="divider"></div>

  {% if answers %}
  <h2 class="text-2xl font-bold mt-5">Answers</h2>
  <ul class="mt-4">
    {% for answer in answers %}
    <li
      class="flex flex-col gap-2 mb-4 group bg-base-200 p-4 rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300"
    >
      <p>{{ answer.body }}</p>

      <div class="flex items-center gap-2 mt-1">
        <p class="text-base-content/70">
          Answered by <b>{{ answer.author.username }}</b>
        </p>
        {% comment %} dot {% endcomment %} &bull;
        <small class="text-base-content/50"
          ><time>{{ answer.created_at }}</time></small
        >
      </div>
    </li>
    {% endfor %}
  </ul>
  {% include "components/pagination.html" with page=answers %} {% else %}

  <div class="my-5 text-center">
    <strong>No answers available.</strong>
    <p>Be the first to answer this question!</p>
  </div>
  {% endif %}
</section>
{% endblock %}
